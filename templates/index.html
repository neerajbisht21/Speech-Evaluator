<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Speech Rubric Scorer</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='main.js') }}" defer></script>

    <style>
        /* Animated gradient background */
        body {
            background: linear-gradient(135deg, #4ade80, #14b8a6, #a78bfa);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            position: relative;
            overflow-x: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Floating circles */
        .circle {
            position: absolute;
            border-radius: 50%;
            opacity: 0.15;
            animation: floatCircle linear infinite;
        }

        @keyframes floatCircle {
            0% { transform: translateY(0) translateX(0) rotate(0deg); }
            50% { transform: translateY(-100px) translateX(50px) rotate(180deg); }
            100% { transform: translateY(0) translateX(0) rotate(360deg); }
        }

        /* Smooth fade-in for result cards */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease-out;
        }

        .fade-in.show {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body class="min-h-screen flex justify-center items-center py-10">

<!-- Floating circles -->
<div class="circle w-40 h-40 bg-teal-300 top-10 left-10"></div>
<div class="circle w-32 h-32 bg-purple-400 top-64 left-72"></div>
<div class="circle w-56 h-56 bg-cyan-300 top-96 left-20"></div>
<div class="circle w-24 h-24 bg-pink-300 top-20 right-20"></div>

<div class="w-full max-w-7xl p-10 bg-white/90 backdrop-blur-md rounded-3xl shadow-2xl border border-gray-200 flex flex-col md:flex-row gap-10">

    <!-- Left: Input Section -->
    <div class="md:w-1/2 flex flex-col items-center gap-6">

        <h1 class="text-5xl font-bold text-center text-teal-700 mb-6">
            Speech Rubric Scorer
        </h1>

        <textarea id="inputText"
                  class="w-full md:w-11/12 p-6 border border-gray-300 rounded-3xl focus:ring-4 focus:ring-teal-400 outline-none resize-none overflow-hidden min-h-[20rem] transition-all duration-300"
                  placeholder="Paste your transcript here..."
                  oninput="autoGrow(this)"></textarea>

        <div class="flex flex-wrap gap-4 justify-center">
            <button onclick="loadSample()" class="px-6 py-3 bg-teal-600 hover:bg-teal-700 text-white rounded-xl shadow-lg transform hover:-translate-y-1 hover:scale-105 transition">
                Load Sample
            </button>

            <button onclick="openFile()" class="px-6 py-3 bg-cyan-600 hover:bg-cyan-700 text-white rounded-xl shadow-lg transform hover:-translate-y-1 hover:scale-105 transition">
                Upload .txt
            </button>
            <input type="file" id="fileInput" accept=".txt" class="hidden" onchange="loadFile(event)">

            <button onclick="scoreText()" class="px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl shadow-lg transform hover:-translate-y-1 hover:scale-105 transition">
                Score
            </button>
        </div>

        <div id="loading" class="text-center text-lg font-semibold text-gray-700 mt-2 hidden">
            ‚è≥ Scoring... Please wait.
        </div>

    </div>

    <!-- Right: Result Dashboard -->
    <div id="result" class="md:w-1/2 flex flex-col gap-4 p-6 bg-white/80 rounded-3xl shadow-inner overflow-auto max-h-[80vh]">
        <!-- Result cards dynamically added here -->
    </div>

</div>

<script>
function autoGrow(element) {
    element.style.height = "auto";
    element.style.height = element.scrollHeight + "px";
}

// Example: dynamically add a card
function addResultCard(text) {
    const card = document.createElement('div');
    card.className = "fade-in p-4 bg-white rounded-2xl shadow hover:shadow-lg transition";
    card.innerText = text;
    document.getElementById('result').appendChild(card);

    setTimeout(() => card.classList.add('show'), 50);
}
</script>

</body>
</html>
